{"ast":null,"code":"// client/src/Login.js\nimport React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{setIsAuthenticated,setOperator}=_ref;const[accountId,setAccountId]=useState('');const[password,setPassword]=useState('');const[errorMsg,setErrorMsg]=useState('');const navigate=useNavigate();const handleLogin=e=>{e.preventDefault();fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({accountId,password})}).then(response=>{if(!response.ok){throw new Error('ログイン失敗');}return response.json();}).then(data=>{// 認証成功時、認証状態を true にし、操作者としてログインしたアカウント名を保存\nsetIsAuthenticated(true);setOperator(data.account.accountId);navigate('/dashboard');}).catch(error=>{setErrorMsg('アカウントIDまたはパスワードが正しくありません');});};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8ID: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:accountId,onChange:e=>setAccountId(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:()=>navigate('/tool/dashboard'),children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"})]}),errorMsg&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:errorMsg})]});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","setIsAuthenticated","setOperator","accountId","setAccountId","password","setPassword","errorMsg","setErrorMsg","navigate","handleLogin","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","response","ok","Error","json","data","account","catch","error","style","padding","children","onSubmit","type","value","onChange","target","required","onClick","color"],"sources":["C:/Users/mygoodnote/OneDrive - 東京都市大学 Tokyo City University/デスクトップ/work/React/LoginSystem/client/src/Login.js"],"sourcesContent":["// client/src/Login.js\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Login({ setIsAuthenticated, setOperator }) {\r\n  const [accountId, setAccountId] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    fetch('/api/login', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ accountId, password })\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('ログイン失敗');\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        // 認証成功時、認証状態を true にし、操作者としてログインしたアカウント名を保存\r\n        setIsAuthenticated(true);\r\n        setOperator(data.account.accountId);\r\n        navigate('/dashboard');\r\n      })\r\n      .catch(error => {\r\n        setErrorMsg('アカウントIDまたはパスワードが正しくありません');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h1>ログイン</h1>\r\n      <form onSubmit={handleLogin}>\r\n        <div>\r\n          <label>アカウントID: </label>\r\n          <input\r\n            type=\"text\"\r\n            value={accountId}\r\n            onChange={(e) => setAccountId(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>パスワード: </label>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\" onClick={() => navigate('/tool/dashboard')}>ログイン</button>\r\n      </form>\r\n      {errorMsg && <p style={{ color: 'red' }}>{errorMsg}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}